<!DOCTYPE html>
<html ng-app="App" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=0.5,user-scalable=yes,initial-scale=1.0">
    <title>EIFUKU CIPHER</title>
    <link rel="stylesheet" type="text/css" href="dest/assets/stylesheets/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script src="https://angular-ui.github.io/ui-router/release/angular-ui-router.js"></script>
  </head>
  <body>
    <header>
      <div class="headerWrapper">
        <h1><a ui-sref="/"> <img src="dest/assets/images/eifukulogo.svg" alt="EIFUKU CIPHER"></a></h1>
        <nav>
          <ul>
            <li><a ui-sref="biography">biography</a></li>
            <li> <a ui-sref="projects">projects</a></li>
            <li> <a ui-sref="map">access</a></li>
            <li> <a ui-sref="contact">contact</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <div class="content">
      <nav>
        <ul>
          <li><a ui-sref="biography">biography</a></li>
          <li> <a ui-sref="projects">projects</a></li>
          <li> <a ui-sref="map">access</a></li>
          <li class="halfHeight"><a ui-sref="contact">contact</a></li>
        </ul>
      </nav>
      <div ui-view autoscroll="false" class="innerbox"></div>
      <!-- inject:pde-->
      <script type="text/processing" id = "pde_script_1">import java.util.*;
ArrayList<Particle> particles;
PImage poop,hand;
PFont font;
Particle p;
int gameover = 0;
int score = 0;
boolean gameover = false;

void setup(){
  size(320,480);
  particles = new ArrayList<Particle>();
  poop = loadImage("dest/assets/images/emoji_poop.png");
  hand = loadImage("dest/assets/images/emoji_hand.png");
  font = createFont("Helvetica", 32);
  textFont(font);
}

void draw(){
  background(0);
  particles.add(new Particle(new PVector(width/2,0)));

  Iterator<Particle> it = particles.iterator();

  while (it.hasNext()){
    Particle p = it.next();
    p.run();
    if(p.isDead()){
      it.remove();
    }
    if(p.isTouch()){
      gameOver();
      break;
    }


  }
  image(hand,mouseX,mouseY);
  if(frameCount % 10 == 0)  score++;
  text(score,50,330);

}
void gameOver(){
  fill(255,0,0,50);
  rect(0,0,width,height);
  fill(255);
  text("YOU are DEAD", 50,50);
  gameover = true;
  noLoop();

}

void mouseClicked(){
  if(gameover == true){
  particles.clear();
  score = 0;
  loop();
  gameover = false;
}

}



class Particle{
  PVector loc;
  PVector vel;
  PVector acc;
  float lifespan;
  float mass;

  Particle(PVector l ){
   loc = l.get();
   acc = new PVector(0,0.05);
   vel = new PVector(random(-1,1),random(-1,1));
   lifespan = 255;
   mass = 10;


   }

   void run(){
     applyForce(mouseForce());
     update();
     display();
   }

   void update(){
     vel.add(acc);
     loc.add(vel);
     lifespan--;

   }

   void display(){
     noStroke();
     fill(255,lifespan);
     image(poop, loc.x,loc.y);
     }

   void applyForce(PVector f){
     f.mult(1/mass);
     acc.add(f);
     acc.mult(0.8);

   }

     boolean isTouch(){
     PVector mousepos = new PVector(mouseX,mouseY);
     if (PVector.dist(mousepos,loc) < 4) return true;
     else return false;
   }

   PVector mouseForce(){
     PVector mousepos = new PVector(mouseX,mouseY);
     PVector f = PVector.sub(mousepos,loc);
     f.normalize();
     f.mult(0.05);
     return f;
   }

   boolean isDead(){
   if(lifespan < 0)     return true;
   else return false;

   }

}
</script>
      <script type="text/processing" id = "pde_script_2">int STROKECOUNT = 48;

void setup(){
  size(320,500);
  //smooth();
}

void draw(){
  background(0);
  strokeWeight(2);
  stroke(255);
  fill(0);
  int step = 4;
  float lastx = -999;
  float lasty = -999;
  float ynoise = float(frameCount)/20;
  float y;
  float ystep = (height-130) / STROKECOUNT;

  for (int yorigin = 80; yorigin < height-50; yorigin+=ystep){
    beginShape();
    for (float x=20; x<=width-20; x+=step) {
       y = yorigin -  noise(ynoise + x/200)*80 * exp(pow((x - width/2 - sin(yorigin/ystep)*random(10))/50,2)*(-0.95));
      if (lastx > -999) {
        vertex(x, y);
    }
    lastx = x; lasty = y; ynoise += 0.1;
    }
    endShape();
    lastx = -999; ynoise += 0.2;
  }

}
</script>
      <!-- endinject
      -->
    </div>
    <footer>			
      <ul>
        <li><a ui-sref="biography">biography</a></li>
        <li> <a ui-sref="projects">projects</a></li>
        <li> <a ui-sref="map">access</a></li>
        <li> <a ui-sref="contact">contact</a></li>
      </ul>
    </footer>
  </body>
</html>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLlGM_IwpYJ2qADoVLNpUYMQCZP597Mvw&amp;language=en&amp;callback=init"></script>
<script src="dest/assets/js/processing.js"></script>
<script src="dest/assets/js/app.js"></script>